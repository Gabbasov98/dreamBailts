function gallery() {
    var swiper = new Swiper(".gallery .mySwiper", {
        spaceBetween: 0,
        slidesPerView: "auto",
        freeMode: true,
        watchSlidesProgress: true,
    });
    var swiper2 = new Swiper(".gallery .mySwiper2", {
        spaceBetween: 0,
        slidesPerView: "auto",
        thumbs: {
            swiper: swiper,
        },
        navigation: {
            nextEl: '.gallery .swiper-button-next',
            prevEl: '.gallery .swiper-button-prev',
        },
        pagination: {
            el: '.gallery .swiper-pagination',
            type: 'bullets',
            clickable: true,
        },
    });
}

gallery()

let tabBlocks = document.querySelectorAll("._tabs-parent")

tabBlocks.forEach(tabBlock => {
    let tabs = tabBlock.querySelectorAll("._tab")
    let tabContents = tabBlock.querySelectorAll("._tab-content")

    tabs.forEach(tab => {
        tab.onclick = function(){
            let tabId = this.dataset.tab

            tabs.forEach(tab => {
                tab.classList.remove("_active")
            })
            tab.classList.add("_active")

            tabContents.forEach(tabContent => {
                tabContent.classList.remove("_active")
            })
            tabBlock.querySelector(`._tab-content.${tabId}`).classList.add("_active")
        }

    })
})


$(".mob-detail__show").click(function () {
    $(this).parents(".mob-detail").toggleClass("_active")
    $(this).siblings(".mob-detail__hidden").slideToggle()
})

$("._show-all-colors").click(function () {
    $(".colors").addClass("_all-colors")
})

$(".color-field input").change(function () {
    setColor($(this))
})

setColor($(".color-field input:checked"))

function setColor(el) {
    let title = $(el).parents(".color-field").find("._color-title").text().replace(/\s+/g, " ")
    $("._selected-color").html(title)
}

function cartCalc(){
    $('.cartcalc .ccalc-minus').click(function(){
        let a = $(this).closest('.cartcalc').find('input').val();
        if(a>1){
            let b = +a-1;
            $(this).closest('.cartcalc').find('input').val(b);
        }else{
            $(this).closest('.cartcalc').find('input').val(a);
            $(".cart-nav").removeClass("_added")
        }
    });
    $('.cartcalc .ccalc-plus').click(function(){
        let a = $(this).closest('.cartcalc').find('input').val();
        let b = +a+1;
        $(this).closest('.cartcalc').find('input').val(b);
    });
}
cartCalc()

$("._add-to-cart").click(function () {
    $(".cart-nav").addClass("_added")
})

fixCartNav()
$(window).scroll(function() {
    fixCartNav()
})

function fixCartNav() {
    if ($(window).scrollTop() > 800) {
        $(".buy-section").addClass("_show")
    } else {
        $(".buy-section").removeClass("_show")
    }
}

$("._all-props").click(function () {
    $(".catalog-detail").find("[data-tab='_tab2']").click()
})

$(".filter-group__toggle").click(function () {
    let parent = $(this).parents(".filter-group")

    $(parent).toggleClass("_active")
    console.log($(parent).find(".filter-group__bottom"))
    $(parent).find(".filter-group__bottom").slideToggle()
})

$(".filter-group__more").click(function () {
    $(this).siblings(".filter-group__checkboxes").addClass("_show-all")
})


let filterSliders = document.querySelectorAll(".filter-slider")

filterSliders.forEach(slider => {
    const rangeSlider = slider.querySelector(`.range-slider`)
    const rangeInput0 = slider.querySelector(`.range-slider__input1`)
    const rangeInput1 = slider.querySelector(`.range-slider__input2`)
    const rangeInputs = [rangeInput0, rangeInput1]

    let startValue1 = +slider.getAttribute("data-start")
    let startValue2 = +slider.getAttribute("data-start2")
    let min = +slider.getAttribute("data-min")
    let max = +slider.getAttribute("data-max")

    if (rangeSlider) {
        noUiSlider.create(rangeSlider, {
            start: [startValue1, startValue2],
            connect: true,
            step: 1,
            range: {
                'min': min,
                'max': max
            },
            pips: {mode: 'count', values: 5}
        });
    }
    if (rangeSlider) {
        rangeSlider.noUiSlider.on('update', function(values, handle) {
            rangeInputs[handle].value = Math.round(values[handle])
        })
        rangeInputs.forEach((el, index) => {
            el.addEventListener('change', (e) => {
                setRangeSlider(index, e.currentTarget.value)
            })
        })
    }
    const setRangeSlider = (i, value) => {
        let array = [null, null];
        array[i] = value;

        rangeSlider.noUiSlider.set(array);
    };
})


$(".mob-filter__btn").click(function () {
    $(".filter").toggleClass("_active")
    $("body").toggleClass("fixed-body")
})

$(".filter__close").click(function () {
    $(".filter").toggleClass("_active")
    $("body").toggleClass("fixed-body")
})


$(".cart-info__close").click(function () {
    $(".cart-info").removeClass("_active")
})

$("._add-to-cart").click(function () {
    $(this).toggleClass("_active")
})


let modalTogglers = document.querySelectorAll("[data-modal]")
let modals = document.querySelectorAll(".modal")
let body = document.querySelector("body")

modalTogglers.forEach(el => {
    el.onclick = function () {
        let modalId = el.getAttribute("data-modal")
        let modal = document.querySelector(`#${modalId}`)
        let closeButtons = modal.querySelectorAll(`._close-modal`)

        modal.classList.add("_active")
        body.classList.add("fixed-body2")

        console.log(closeButtons)

        closeButtons.forEach(btn => {
            btn.onclick = ()=> {
                modal.classList.remove("_active")
                body.classList.remove("fixed-body2")
            }
        })
    }
})



var getScrollBarSize = (function() {
    var el = window.document.createElement('textarea'), style = {
        'visibility': 'hidden', 'position': 'absolute', 'zIndex': '-2147483647',
        'top': '-1000px', 'left': '-1000px', 'width': '1000px', 'height': '1000px',
        'overflow': 'scroll', 'margin': '0', 'border': '0', 'padding': '0'
    }, support = el.clientWidth !== undefined && el.offsetWidth !== undefined;

    for (var key in style) {
        if (style.hasOwnProperty(key)) {
            el.style[key] = style[key];
        }
    }

    return function() {
        var size = null;
        if (support && window.document.body) {
            window.document.body.appendChild(el);
            size = [el.offsetWidth - el.clientWidth, el.offsetHeight - el.clientHeight];
            window.document.body.removeChild(el);
        }

        document.documentElement.style.setProperty('--scrollWidth', `${size[0]}px`);
        return size;
    };
})();


window.addEventListener('DOMContentLoaded', () => {
    $(".m-select select").niceSelect()
    $('input[type="tel"]').mask('+7 (999) 999-99-99', { autoclear: false }, { placeholder: '+7 (   )    -  -  ' });

    fix100vh();
    getScrollBarSize()
    window.addEventListener('resize', () => {
        fix100vh();
        getScrollBarSize()
    })


})

function fix100vh() {
    let vh = window.innerHeight * 0.01;
    document.documentElement.style.setProperty('--vh', `${vh}px`);
}

$( function() {
    $.widget( "custom.combobox", {
        _create: function() {
            this.wrapper = $( "<span>" )
                .addClass( "custom-combobox" )
                .insertAfter( this.element );

            this.element.hide();
            this._createAutocomplete();
            this._createShowAllButton();
        },

        _createAutocomplete: function() {
            var selected = this.element.children( ":selected" ),
                value = selected.val() ? selected.text() : "";

            this.input = $( "<input>" )
                .appendTo( this.wrapper )
                .val( value )
                .attr( "title", "" )
                .addClass( "custom-combobox-input ui-widget ui-widget-content ui-state-default ui-corner-left" )
                .autocomplete({
                    delay: 0,
                    minLength: 0,
                    source: this._source.bind( this )
                })
                .tooltip({
                    classes: {
                        "ui-tooltip": "ui-state-highlight"
                    }
                });

            this._on( this.input, {
                autocompleteselect: function( event, ui ) {
                    ui.item.option.selected = true;
                    this._trigger( "select", event, {
                        item: ui.item.option
                    });
                },

                autocompletechange: "_removeIfInvalid"
            });
        },

        _createShowAllButton: function() {
            var input = this.input,
                wasOpen = false;

            $( "<a>" )
                .attr( "tabIndex", -1 )
                .attr( "title", "Показать все варианты" )
                .tooltip()
                .appendTo( this.wrapper )
                .button({
                    icons: {
                        primary: "ui-icon-triangle-1-s"
                    },
                    text: false
                })
                .removeClass( "ui-corner-all" )
                .addClass( "custom-combobox-toggle ui-corner-right" )
                .on( "mousedown", function() {
                    wasOpen = input.autocomplete( "widget" ).is( ":visible" );
                })
                .on( "click", function() {
                    input.trigger( "focus" );

                    // Close if already visible
                    if ( wasOpen ) {
                        return;
                    }

                    // Pass empty string as value to search for, displaying all results
                    input.autocomplete( "search", "" );
                });
        },

        _source: function( request, response ) {
            var matcher = new RegExp( $.ui.autocomplete.escapeRegex(request.term), "i" );
            response( this.element.children( "option" ).map(function() {
                var text = $( this ).text();
                if ( this.value && ( !request.term || matcher.test(text) ) )
                    return {
                        label: text,
                        value: text,
                        option: this
                    };
            }) );
        },

        _removeIfInvalid: function( event, ui ) {

            // Selected an item, nothing to do
            if ( ui.item ) {
                return;
            }

            // Search for a match (case-insensitive)
            var value = this.input.val(),
                valueLowerCase = value.toLowerCase(),
                valid = false;
            this.element.children( "option" ).each(function() {
                if ( $( this ).text().toLowerCase() === valueLowerCase ) {
                    this.selected = valid = true;
                    return false;
                }
            });

            // Found a match, nothing to do
            if ( valid ) {
                return;
            }

            // Remove invalid value
            this.input
                .val( "" )
                .attr( "title", value + " не надено совпадений" )
                .tooltip( "open" );
            this.element.val( "" );
            this._delay(function() {
                this.input.tooltip( "close" ).attr( "title", "" );
            }, 2500 );
            this.input.autocomplete( "instance" ).term = "";
        },

        _destroy: function() {
            this.wrapper.remove();
            this.element.show();
        }
    });

    $( ".autocomplete-select" ).combobox();
    // $( "#toggle" ).on( "click", function() {
    //     $( "#combobox" ).toggle();
    // });
    $(document).on('click', '.custom-combobox-toggle', function(e) {
        let parent = $(this).parents(".autocomplete-select")
        $(parent).toggle();
    })
} );

//# sourceMappingURL=../sourcemaps/main.min.js.map
